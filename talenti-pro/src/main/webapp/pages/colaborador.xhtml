<!DOCTYPE html>
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/template-sistema.xhtml">


<ui:define name="content">
<h:form id="formBuscaColaborador">

	    <p:panel header="Buscar Colaborador" style="max-width:80%;margin:auto;">
	        <h:panelGrid columns="2" style="width:100%" cellpadding="5">
	
	            <p:outputLabel for="nomeBusca" value="Nome:" />
	            <p:inputText id="nomeBusca" value="#{colaboradorController.filtroNome}"
	                         placeholder="Digite o nome do colaborador" style="width:100%" />
                      
	        </h:panelGrid>
	
	        <p:commandButton value="Pesquisar" icon="pi pi-search"
	                         action="#{colaboradorController.pesquisar}"
	                         process="@form"
	                         update="formColaborador:tabela msgs"
	                         style="margin-top:10px;width:100%;" />
	    </p:panel>
	
	</h:form>

	<p:separator style="margin:40px 0" />

	       <h:form id="formColaborador">
				<p:panel header="Cadastro de Colaborador"
					style="max-width:80%;margin:auto;">

				<h:inputHidden id="id" value="#{colaboradorController.colaborador.id}" />
 				<h:panelGrid columns="2" style="width:100%" cellpadding="5">
					
				<p:outputLabel  value="ID:" />
				<p:inputText value="#{colaboradorController.colaborador.id}" 
				style="width:100%" readonly="true" />
						
				<p:outputLabel value="Nome:" />	
				<p:inputText value="#{colaboradorController.colaborador.nome}" 
				placeholder="Nome" style="width:100%"  required="true" label="Nome do colaborador"/>
				
				<p:outputLabel value="Nome:" />	
				<p:inputText value="#{colaboradorController.colaborador.email}" 
					placeholder="E-mail" style="width:100%"  
					required="true" label="E-mail"
					 id="email" onblur="validarEmailField(this)">
				</p:inputText>		
				
				<p:outputLabel value="CPF:" />	
				<p:inputText value="#{colaboradorController.colaborador.cpf}" 
				placeholder="___.___.___-__" style="width:100%"  
				mask="999.999.999-99"  oninput="mascaraCPF(this)"
				inputmode="numeric"
				required="true" label="CPF"/>				
				
				
				<p:outputLabel value="Data de Nascimento:" />			
				<p:datePicker value="#{colaboradorController.colaborador.dataNascimento}"
				 pattern="dd/MM/yyyy"  style="width:100%" 
				 mask="99/99/9999" 
				 oninput="somenteNumeros(this)" 
				 inputmode="numeric"
				 required="true" label="Data de Nascimento"/>						
				
				<p:outputLabel value="Data de Admissão:" />			
				<p:datePicker value="#{colaboradorController.colaborador.dataAdmissao}"
				 pattern="dd/MM/yyyy"  
				 mask="99/99/9999" 
				 oninput="somenteNumeros(this)" 
				 inputmode="numeric"
				 style="width:100%" 
				 required="true" label="Data de admissão"/>


 				<p:outputLabel for="escolaridade" value="Escolaridade:" />
 				<p:selectOneMenu id="escolaridade" style="width:100%" required="true"
 				       value="#{colaboradorController.colaborador.escolaridade}"
 				       label="Escolaridade"> 
 				       
 				       <f:selectItem itemLabel="Ensino Básico" itemValue="ENSINO_BASICO"/>
 				       <f:selectItem itemLabel="Ensino Fundamental" itemValue="ENSINO_FUNDAMENTAL"/>
 				       <f:selectItem itemLabel="Ensino Médio" itemValue="ENSINO_MÉDIO"/>
 				       <f:selectItem itemLabel="Superior Completo" itemValue="SUPERIOR_COMPLETO"/>
 				       <f:selectItem itemLabel="Pós-Graduação" itemValue="POS_GRADUACAO"/>
 				       <f:selectItem itemLabel="Especialização" itemValue="ESPECIALIZACAO"/>
 				       <f:selectItem itemLabel="MBA" itemValue="MBA"/>
 				       <f:selectItem itemLabel="Mestrado" itemValue="MESTRADO"/>
 				       <f:selectItem itemLabel="Doutorado" itemValue="DOUTORADO"/>
 				</p:selectOneMenu>  						
	                         
 				<p:outputLabel for="nomeCargo" value="Cargo:" />
 				<p:selectOneMenu id="nomeCargo" style="width:100%" required="true"
 				       value="#{colaboradorController.colaborador.cargo}"
 				       converter="#{cargoConverter}" label="Cargo"> 
 				       
 				       <f:selectItems value="#{colaboradorController.cargos}"
 				       var="g" itemLabel="#{g.nome}" itemValue="#{g}"/>
 				</p:selectOneMenu>  
 				
 				
 				<p:outputLabel for="superior" value="Superior:" />
 				<p:selectOneMenu id="superior" style="width:100%" required="true"
 				       value="#{colaboradorController.colaborador.superior}"
 				       converter="#{cargoConverter}" label="Superior"> 
 				       
 				       <f:selectItems value="#{colaboradorController.cargos}"
 				       var="g" itemLabel="#{g.nome}" itemValue="#{g}"/>
 				</p:selectOneMenu>   				
 				
 				<p:outputLabel for="nomeDepart" value="Departamento:" />
 				<p:selectOneMenu id="nomeDepart" style="width:100%" required="true"
 				       value="#{colaboradorController.colaborador.departamento}"
 				       converter="#{departamentoConverter}" 
 				       label="Departamento"> 
 				       
 				       <f:selectItems value="#{colaboradorController.departamentos}"
 				       var="g" itemLabel="#{g.nome}" itemValue="#{g}"/>
 				</p:selectOneMenu>
 				
 				<p:outputLabel for="nomeVincEmp" value="Vínculo Empregativo:" />
 				<p:selectOneMenu id="nomeVincEmp" style="width:100%" required="true"
 				       value="#{colaboradorController.colaborador.vinculoEmpregativo}"
 				       converter="#{vinculoEmpregativoConverter}" 
 				       label="Vínculo empregaticío"> 
 				       
 				       <f:selectItems value="#{colaboradorController.vinculoEmpregativos}"
 				       var="g" itemLabel="#{g.nome}" itemValue="#{g}" />
 				</p:selectOneMenu>   	 				   				

				</h:panelGrid>	
				<h:panelGroup layout="block" style="display:flex; gap:10px; margin-top:10px;">
				    <p:commandButton value="Salvar" 
				                     action="#{colaboradorController.salvar}"
				                     update="formColaborador tabela msgs"
				                     icon="pi pi-save"
				                     style="flex:1;" />
				
				    <p:commandButton value="Novo" 
				                     action="#{colaboradorController.novo}"
				                     update="formColaborador tabela msgs"
				                     icon="pi pi-plus"
				                     style="flex:1;" />
				</h:panelGroup>
					
				</p:panel>

				<p:separator style="margin:20px 0" />
				

				<p:dataTable id="tabela" value="#{colaboradorController.colaboradors}" 
				    var="p"
				    paginator="true"
				    lazy="true"
				    rows="5"
				    rowsPerPageTemplate="5,10,20,50"
				    paginatorAlwaysVisible="true"
				    paginatorPosition="top"
					style="max-width:80%;margin:auto;">
					<p:column headerText="ID">#{p.id}</p:column>
					<p:column headerText="Nome">#{p.nome}</p:column>
					<p:column headerText="Ações">
					<p:commandButton icon="pi pi-pencil"
					    action="#{colaboradorController.editar(p)}"
					    update=":formColaborador"
					    process="@this"
					    immediate="true"
					    styleClass="ui-button-warning"
					    title="Editar"/>
					
					<p:commandButton icon="pi pi-trash"
					    action="#{colaboradorController.excluir(p)}"
					    update="tabela :formColaborador msgs"
					    process="@this"
					    immediate="true"
					    styleClass="ui-button-danger"
					    title="Excluir" >
					
			                   <p:confirm header="Confirmar" 
				               message="Tem certeza que deseja excluir o registro?"
				               icon="pi pi-exclamation-triangle" />					
					</p:commandButton>

					</p:column>
				</p:dataTable>
			</h:form>
			<p:separator style="margin:50px 0" />

	</ui:define>
</ui:composition>
